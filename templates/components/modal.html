{# 
  Modal Component (Alpine.js)
  
  Usage:
    <div x-data="modal">
      <button @click="show">Open Modal</button>
      {% include "components/modal.html" with title="My Modal" %}
    </div>
    
  Slots:
    - title: Titre du modal
    - Contenu: block modal_body
    - Actions: block modal_footer
#}

<template x-teleport="body">
    <div x-show="open" 
         x-transition:enter="ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 z-50 overflow-y-auto"
         aria-labelledby="modal-title"
         role="dialog"
         aria-modal="true">
        
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
             @click="hide"></div>
        
        <!-- Modal container -->
        <div class="flex min-h-full items-center justify-center p-4">
            <div x-show="open"
                 x-transition:enter="ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave="ease-in duration-200"
                 x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 @click.away="hide"
                 @keydown.escape.window="hide"
                 class="relative bg-white rounded-lg shadow-xl max-w-lg w-full">
                
                <!-- Header -->
                <div class="px-6 py-4 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-gray-900" id="modal-title">
                            {{ title|default:"Modal" }}
                        </h3>
                        <button @click="hide" 
                                class="text-gray-400 hover:text-gray-500 transition-colors">
                            <span class="i-lucide-x text-xl"></span>
                        </button>
                    </div>
                </div>
                
                <!-- Body -->
                <div class="px-6 py-4">
                    {% block modal_body %}
                        {{ body|default:"" }}
                    {% endblock %}
                </div>
                
                <!-- Footer -->
                {% block modal_footer %}
                    <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg flex justify-end gap-3">
                        <button @click="hide" class="btn-secondary">
                            Annuler
                        </button>
                        <button class="btn-primary">
                            Confirmer
                        </button>
                    </div>
                {% endblock %}
            </div>
        </div>
    </div>
</template>
