{# 
  Form Components
  
  Includes reusable form field patterns.
#}

{# Text Input #}
{% macro input(name, label, type="text", value="", placeholder="", required=False, help="", error="") %}
<div>
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if not required %}<span class="text-gray-400">(optionnel)</span>{% endif %}
    </label>
    <input type="{{ type }}"
           id="{{ name }}"
           name="{{ name }}"
           value="{{ value }}"
           placeholder="{{ placeholder }}"
           {% if required %}required{% endif %}
           class="form-input {% if error %}border-red-300 focus:border-red-500 focus:ring-red-500{% endif %}">
    {% if help and not error %}
        <p class="form-help">{{ help }}</p>
    {% endif %}
    {% if error %}
        <p class="form-error">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{# Textarea #}
{% macro textarea(name, label, value="", placeholder="", rows=4, required=False, help="", error="") %}
<div>
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if not required %}<span class="text-gray-400">(optionnel)</span>{% endif %}
    </label>
    <textarea id="{{ name }}"
              name="{{ name }}"
              placeholder="{{ placeholder }}"
              rows="{{ rows }}"
              {% if required %}required{% endif %}
              class="form-input {% if error %}border-red-300 focus:border-red-500 focus:ring-red-500{% endif %}">{{ value }}</textarea>
    {% if help and not error %}
        <p class="form-help">{{ help }}</p>
    {% endif %}
    {% if error %}
        <p class="form-error">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{# Select #}
{% macro select(name, label, options, value="", required=False, help="", error="") %}
<div>
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if not required %}<span class="text-gray-400">(optionnel)</span>{% endif %}
    </label>
    <select id="{{ name }}"
            name="{{ name }}"
            {% if required %}required{% endif %}
            class="form-input {% if error %}border-red-300 focus:border-red-500 focus:ring-red-500{% endif %}">
        {% for opt_value, opt_label in options %}
            <option value="{{ opt_value }}" {% if opt_value == value %}selected{% endif %}>
                {{ opt_label }}
            </option>
        {% endfor %}
    </select>
    {% if help and not error %}
        <p class="form-help">{{ help }}</p>
    {% endif %}
    {% if error %}
        <p class="form-error">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{# Checkbox #}
{% macro checkbox(name, label, checked=False, help="") %}
<div class="flex items-start gap-3">
    <input type="checkbox"
           id="{{ name }}"
           name="{{ name }}"
           {% if checked %}checked{% endif %}
           class="mt-1 h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500">
    <div>
        <label for="{{ name }}" class="text-sm font-medium text-gray-700">
            {{ label }}
        </label>
        {% if help %}
            <p class="text-sm text-gray-500">{{ help }}</p>
        {% endif %}
    </div>
</div>
{% endmacro %}

{# File Upload #}
{% macro file_upload(name, label, accept="", help="") %}
<div>
    <label for="{{ name }}" class="form-label">{{ label }}</label>
    <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-gray-400 transition-colors">
        <div class="space-y-1 text-center">
            <span class="i-lucide-upload text-3xl text-gray-400"></span>
            <div class="flex text-sm text-gray-600">
                <label for="{{ name }}"
                       class="relative cursor-pointer rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500">
                    <span>Téléverser un fichier</span>
                    <input id="{{ name }}"
                           name="{{ name }}"
                           type="file"
                           {% if accept %}accept="{{ accept }}"{% endif %}
                           class="sr-only">
                </label>
                <p class="pl-1">ou glisser-déposer</p>
            </div>
            {% if help %}
                <p class="text-xs text-gray-500">{{ help }}</p>
            {% endif %}
        </div>
    </div>
</div>
{% endmacro %}
